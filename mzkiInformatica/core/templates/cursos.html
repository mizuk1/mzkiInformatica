    {% extends "base.html" %}
{% load static %}

{% block title %}Cursos{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'assets/css/cursos.css' %}">
{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="breadcrumb-nav">
  <div class="container">
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item"><a href="{% url 'home' %}">üè† Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">üìö Cursos</li>
    </ol>
  </div>
</nav>

<!-- Se√ß√£o de Apps Dispon√≠veis -->
<section class="py-3 section-light-bg" id="appShowcase">
    <div class="container">
        <h5 class="fw-bold mb-3 text-center">üìö Explore por Aplica√ß√£o</h5>
        <div class="row g-2">
            {% for app_item in apps_com_contagem %}
            <div class="col-6 col-md-4 col-lg-2">
                <button class="app-card card border-0 h-100 text-decoration-none" data-app="{{ app_item.app }}" style="background-color: {{ app_item.cor }};">
                    <div class="card-body text-center py-3 px-2">
                        <small class="fw-bold mb-1 d-block" style="color: white; font-size: 14px; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">{{ app_item.app }}</small>
                        <small style="color: rgba(255,255,255,0.95); font-size: 12px;">{{ app_item.count }} curso{{ app_item.count|pluralize }}</small>
                    </div>
                </button>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Filtros e Busca -->
<section class="py-4 section-light-bg">
    <div class="container">
        <div class="row g-3">
            <!-- Busca em Tempo Real -->
            <div class="col-12 col-md-6 col-lg-4">
                <div class="d-flex">
                    <input type="text" id="searchInput" class="form-control me-2" placeholder="Buscar por nome, app...">
                    <button id="searchBtn" class="btn btn-primary">üîç</button>
                </div>
            </div>
            
            <!-- Filtro por App -->
            <div class="col-12 col-sm-6 col-lg-2">
                <select id="filterApp" class="form-select">
                    <option value="">Todos os Apps</option>
                    {% for app in apps %}
                    <option value="{{ app }}">{{ app }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <!-- Filtro por N√≠vel -->
            <div class="col-12 col-sm-6 col-lg-2">
                <select id="filterNivel" class="form-select">
                    <option value="">Todos os N√≠veis</option>
                    {% for nivel in niveis %}
                    <option value="{{ nivel }}">{{ nivel }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <!-- Filtro por Vers√£o -->
            <div class="col-12 col-sm-6 col-lg-2">
                <select id="filterVersao" class="form-select">
                    <option value="">Todas as Vers√µes</option>
                    {% for versao in versoes %}
                    <option value="{{ versao }}">{{ versao }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <!-- Limpar Filtros -->
            <div class="col-12 col-sm-6 col-lg-2">
                <button id="clearFilters" class="btn btn-outline-secondary w-100">Limpar Filtros</button>
            </div>
        </div>
    </div>
</section>

{% if cursos %}
<section class="py-3 section-lighter-bg">
    <div class="container">
        <p class="text-muted mb-0"><small>üìä <span id="courseCount">{{ cursos|length }}</span> cursos encontrados</small></p>
    </div>
</section>

<section class="py-4 py-xl-5">
    <div class="container">
        <div class="row g-4" id="coursesGrid">
            <!-- Cursos ser√£o inseridos aqui via JavaScript -->
        </div>
        
        <!-- Pagina√ß√£o -->
        <nav aria-label="Pagina√ß√£o" id="paginationNav">
            <ul class="pagination justify-content-center" id="paginationList">
                <!-- Pagina√ß√£o ser√° gerada via JavaScript -->
            </ul>
        </nav>
    </div>
</section>
{% else %}
<section class="py-5">
    <div class="container text-center">
        <p class="text-muted fs-5">üòî Nenhum curso encontrado.</p>
    </div>
</section>
{% endif %}

<!-- Data com todos os cursos em JSON -->
<script>
const allCourses = {{ cursos_json|safe }};
</script>

<!-- Cursos page scripts -->
<script src="{% static 'assets/js/cursos.js' %}" defer></script>

{% endblock %}
